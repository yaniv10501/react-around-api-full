(this["webpackJsonparound-react-auth"]=this["webpackJsonparound-react-auth"]||[]).push([[0],{22:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(12),c=n.n(i),o=n(7),s=(n(22),n(17)),u=n(11),l=n(4),p=n.n(l),d=n(5),b=n(2),j=n(3),f=n(13),m=n.p+"static/media/header-logo.4e8e0a1d.svg",h=n.p+"static/media/mobile-menu.a46d5c1c.svg",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAADhu0ooAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgB7dlhDoIwDIbhxhN4Y7mJuxHeqLJgk4bgHLBu6/zexF8mK88fHSkRQgghhBBC6H9j5vvymci4OCPOohZ9kC9ee5JR8ezPjLk6doNkK6xCchPsMuzB+xXD7iCliWq2DAxW2AQyUIsssN0h1YMVw3aLlEpgu0dKV7BukNIZrDukdATrFinlYN0jpRR2GKSUwI6DlDKxgUboBzZQhW5UJz75nZ8SPzw6s/fZKmUifWMTyMCGr3hV44z/SfdYPnAZcIvlEzced1i+cK1zg+UCd9fusSWQ6qw+sSWR6sy+sBZIdXYfWF53ISZINeMbdqJa8bqSmK2Qas4WG9cgTfYvsxVSzQnNkOohxl8bIoQQQgghhProDd54uKNMgm3ZAAAAAElFTkSuQmCC",x=n(0);function g(e){var t=e.headerText,n=e.headerButton,r=e.headerAction,i=e.headerStyle,c=Object(f.useMediaQuery)({query:"(max-width: 652px)"}),o=Object(a.useState)(h),s=Object(b.a)(o,2),u=s[0],l=s[1],p=Object(a.useState)(!1),d=Object(b.a)(p,2),j=d[0],g=d[1];return Object(a.useEffect)((function(){l(j?O:h)}),[j]),Object(x.jsxs)("header",{className:"header",children:[Object(x.jsxs)("div",{className:"header__icons",style:j?{alignItems:"center"}:{},children:[Object(x.jsx)("img",{className:"header__logo",src:m,alt:"Header logo",style:j?{marginTop:"32px"}:{}}),c&&Object(x.jsx)("img",{className:"header__menu-icon",src:u,alt:"mobile menu icon",onClick:function(){g(!j)},style:u===O?{height:"38px",width:"38px"}:{}})]}),c&&(j?Object(x.jsxs)("p",{className:"header__text",children:[t,Object(x.jsxs)("span",{className:"header__button",role:"button",tabIndex:0,onClick:r.action,style:i,children:[" ",n]})]}):""),!c&&Object(x.jsxs)("p",{className:"header__text",children:[t,Object(x.jsxs)("span",{className:"header__button",role:"button",tabIndex:0,onClick:r.action,style:i,children:[" ",n]})]})]})}g.defaultProps={headerText:""};var _=Object(a.createContext)();function v(e){var t=e.card,n=t._id,r=t.name,i=t.link,c=t.owner,o=t.likes,s=e.onCardClick,u=e.onLike,l=e.likeActive,p=e.onDelete,d=Object(a.useContext)(_),b=c===d._id,j="photo__delete ".concat(!b&&"photo__delete_hidden"),f=o.some((function(e){return e===d._id})),m="photo__like ".concat(f&&"photo__like_active");return Object(x.jsxs)("li",{className:"photo",children:[Object(x.jsx)("img",{className:"photo__image",alt:r,src:i,onClick:function(){s(r,i)}}),Object(x.jsx)("button",{className:j,type:"button","aria-label":"Delete",onClick:function(){p(n)}}),Object(x.jsxs)("div",{className:"photo__info",children:[Object(x.jsx)("h2",{className:"photo__title",children:r}),Object(x.jsxs)("div",{className:"photo__like-container",children:[Object(x.jsx)("button",{className:m,type:"button","aria-label":"Like",onClick:l?{}:function(){u(n,o)}}),Object(x.jsx)("p",{className:"photo__like-count",children:o.length})]})]})]})}var k="https://yanivapi.students.nomoreparties.site",S=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}e.t0=t.json(),e.next=11;break;case 4:return e.t1=Promise,e.t2=t.status,e.next=8,t.json().then((function(e){return e.error||e.message}));case 8:e.t3=e.sent,e.t4={status:e.t2,message:e.t3},e.t0=e.t1.reject.call(e.t1,e.t4);case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(k,"/signup"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return S(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(k,"/signin"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return S(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(k,"/users/me"),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return S(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function A(e){var t=e.isLoading,n=e.cards,r=e.onEditProfileClick,i=e.onAddPlaceClick,c=e.onEditAvatarClick,o=e.onDeleteCardClick,s=e.onCardClick,u=e.onCardLike,l=e.likeActive,p=e.setHeaderText,d=e.setHeaderButton,b=e.setHeaderAction,f=e.setHeaderStyle,m=e.setLoggedIn,h=e.setCurrentUser,O=Object(j.g)(),g=Object(a.useContext)(_),k=g.name,S=g.about,N=g.link,C=function(){m(!1),h({}),localStorage.removeItem("token"),O("/")},A=function(){m(!0),d("Log out"),f({color:"#A9A9A9"}),b({action:C})};return Object(a.useEffect)((function(){g.email&&""!==g.email?(p(g.email),A()):y().then((function(e){h(e),p(e.email),A()})).catch((function(){O("/login")}))}),[]),Object(x.jsxs)("main",{className:"container",children:[Object(x.jsx)("div",{className:t?"spinner":"spinner spinner_hidden",children:Object(x.jsx)("i",{})}),Object(x.jsxs)("div",{className:t?"content content_hidden":"content",children:[Object(x.jsxs)("section",{className:"profile",children:[Object(x.jsx)("button",{className:"profile__edit-pic",type:"button",onClick:c,children:Object(x.jsx)("div",{className:"profile__pic",style:{backgroundImage:"url(".concat(N,")")}})}),Object(x.jsxs)("div",{className:"profile__info",children:[Object(x.jsx)("h1",{className:"profile__name",id:"name",children:k}),Object(x.jsx)("p",{className:"profile__description",id:"job",children:S}),Object(x.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"Edit profile",onClick:r})]}),Object(x.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"Add a picture",onClick:i})]}),Object(x.jsx)("section",{className:"photos",children:Object(x.jsx)("ul",{className:"photos__grid",children:n.map((function(e){return Object(x.jsx)(v,{card:e,onCardClick:s,onLike:u,likeActive:l,onDelete:o},e._id)}))})})]})]})}function E(){return Object(x.jsx)("footer",{className:"footer",children:Object(x.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around the U.S. Yaniv Schweitzer"})})}var T=function(e,t){e.target.className.includes("popup_opened")&&t()};function w(e){var t=e.selectedCard,n=t.name,a=t.link,r=e.isOpen,i=e.onClose;return Object(x.jsx)("div",{onClick:function(e){return T(e,i)},role:"button",tabIndex:0,className:r?"popup popup_type_image popup_opened":"popup popup_type_image",children:Object(x.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(x.jsx)("img",{className:"popup__image",src:a,alt:n}),Object(x.jsx)("h2",{className:"popup__image-title",children:n}),Object(x.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:i})]})})}var L=n(14),V=n(15),I=new(function(){function e(t){var n=t.baseUrl;Object(L.a)(this,e),this._baseUrl=n}return Object(V.a)(e,[{key:"getIntialCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return S(e)}))}},{key:"setUserinfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return S(e)}))}},{key:"setUserPicture",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({link:e})}).then((function(e){return S(e)}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then((function(e){return S(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return S(e)}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return S(e)}))}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return S(e)}))}}]),e}())({baseUrl:"https://yanivapi.students.nomoreparties.site"}),U=function(e){return!/[<>]/.test(e)},P=function(e){var t=/https?:\/\/(www\.)?[\w._-~:/?%#[\]@!$&'()*+,;=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([\w._-~:/?%#[\]@\-!$&'()*+,;=]*)/;return{valid:t.test(e),match:e.match(t)}};function z(e){var t=e.name,n=e.formName,a=e.formTitle,r=e.submitTitle,i=e.submitLoadingTitle,c=e.isOpen,o=e.onSubmit,s=e.formRef,u=e.formValid,l=e.isLoading,p=e.handleClose,d=e.children;return Object(x.jsx)("div",{role:"button",tabIndex:0,onClick:function(e){return T(e,p)},className:c?"popup popup_type_".concat(t," popup_opened"):"popup popup_type_".concat(t),children:Object(x.jsxs)("div",{className:"popup__container",children:[Object(x.jsxs)("form",{ref:s,className:"popup__form",name:n,_id:"",onSubmit:o,noValidate:!0,children:[Object(x.jsx)("h2",{className:"popup__title",children:a}),d,Object(x.jsx)("button",{className:u?"popup__save-button":"popup__save-button popup__save-button_disabled",type:"submit",children:l?"".concat(i,"..."):r})]}),Object(x.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:p})]})})}function B(e){var t=e.isOpen,n=e.onClose,r=e.onUpdateUser,i=Object(a.useRef)(),c=Object(a.useState)(!1),o=Object(b.a)(c,2),s=o[0],u=o[1],l=Object(a.useState)(!1),j=Object(b.a)(l,2),f=j[0],m=j[1],h=Object(a.useState)({isValid:!0,inputError:""}),O=Object(b.a)(h,2),g=O[0],v=O[1],k=Object(a.useState)({isValid:!0,inputError:""}),S=Object(b.a)(k,2),N=S[0],C=S[1],y=Object(a.useState)(""),A=Object(b.a)(y,2),E=A[0],T=A[1],w=Object(a.useState)(""),L=Object(b.a)(w,2),V=L[0],I=L[1],P=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!f){e.next=6;break}return u(!0),e.next=5,r(E,V);case 5:setTimeout((function(){return u(!1)}),500);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object(a.useContext)(_);return Object(a.useEffect)((function(){T(B.name),I(B.about)}),[B,t]),Object(a.useEffect)((function(){g.isValid&&N.isValid?m(!0):m(!1)}),[g,N]),Object(x.jsxs)(z,{name:"edit-info",formName:"editInfo",formTitle:"Edit profile",submitTitle:"Save",submitLoadingTitle:"Saving",isOpen:t,handleClose:function(){n(),T(B.name),I(B.about),C({isValid:!0,inputError:""}),v({isValid:!0,inputError:""})},onSubmit:P,formRef:i,formValid:f,isLoading:s,children:[Object(x.jsx)("input",{className:"popup__input popup__input_type_name",id:"name-input",type:"text",placeholder:"name",name:"name",value:E||"",onChange:function(e){var t=e.target.value;T(t),t.length<2?v({isValid:!1,inputError:"Use at least 2 characters"}):t.length>40?v({isValid:!1,inputError:"Use no more than 40 characters"}):U(t)?v({isValid:!0,inputError:""}):v({isValid:!1,inputError:"'<' and '>' are invalid characters"})},required:!0}),Object(x.jsx)("span",{className:"popup__error name-input-error",children:g.inputError}),Object(x.jsx)("input",{className:"popup__input popup__input_type_about",id:"about-input",type:"text",placeholder:"about me",name:"job",value:V||"",onChange:function(e){var t=e.target.value;I(t),t.length<=2?C({isValid:!1,inputError:"Use at least 2 characters"}):t.length>200?C({isValid:!1,inputError:"Use no more than 200 characters"}):U(t)?C({isValid:!0,inputError:""}):C({isValid:!1,inputError:"'<' and '>' are invalid characters"})},required:!0}),Object(x.jsx)("span",{className:"popup__error about-input-error",children:N.inputError})]})}z.defaultProps={children:[]};var H=n(16),D=n.n(H);function R(e){var t=e.isOpen,n=e.onClose,r=e.onUpdateAvatar,i=Object(a.useState)(!1),c=Object(b.a)(i,2),o=c[0],s=c[1],u=Object(a.useState)(!1),l=Object(b.a)(u,2),j=l[0],f=l[1],m=Object(a.useState)(""),h=Object(b.a)(m,2),O=h[0],g=h[1],_=Object(a.useState)(""),v=Object(b.a)(_,2),k=v[0],S=v[1],N=Object(a.useRef)(),C=Object(a.useCallback)((function(){n(),g(""),S(""),f(!1)}),[n]),y=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!j){e.next=8;break}return s(!0),n=D()(O),e.next=6,r(n);case 6:C(),setTimeout((function(){return s(!1)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(z,{name:"edit-picture",formName:"editPicture",formTitle:"Change profile picture",submitTitle:"Save",submitLoadingTitle:"Saving",isOpen:t,onSubmit:y,formRef:N,formValid:j,isLoading:o,handleClose:C,children:[Object(x.jsx)("input",{onChange:function(e){var t=e.target.value,n=P(t);g(t),n.valid?(S(""),f(!0)):(S("Please fill in a valid URL"),f(!1))},value:O,className:"popup__input popup__input_type_profile-picture",id:"profile-picture-input",placeholder:"profile picture url",name:"picture",type:"url",required:!0}),Object(x.jsx)("span",{className:"popup__error profile-picture-input-error",children:k})]})}function Q(e){var t=e.isOpen,n=e.onClose,r=e.onAddPlace,i=Object(a.useRef)(),c=Object(a.useState)(!1),o=Object(b.a)(c,2),s=o[0],u=o[1],l=Object(a.useState)(!1),j=Object(b.a)(l,2),f=j[0],m=j[1],h=Object(a.useState)({isValid:!1,inputError:""}),O=Object(b.a)(h,2),g=O[0],_=O[1],v=Object(a.useState)({isValid:!1,inputError:""}),k=Object(b.a)(v,2),S=k[0],N=k[1],C=Object(a.useState)(""),y=Object(b.a)(C,2),A=y[0],E=y[1],T=Object(a.useState)(""),w=Object(b.a)(T,2),L=w[0],V=w[1],I=Object(a.useCallback)((function(){n(),E(""),V(""),N({isValid:!1,inputError:""}),_({isValid:!1,inputError:""})}),[n]),B=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!f){e.next=7;break}return u(!0),e.next=5,r(A,L);case 5:I(),setTimeout((function(){return u(!1)}),500);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g.isValid&&S.isValid?m(!0):m(!1)}),[g,S]),Object(x.jsxs)(z,{name:"add",formName:"add",formTitle:"New Place",submitTitle:"Create",submitLoadingTitle:"Creating",isOpen:t,onSubmit:B,formRef:i,formValid:f,isLoading:s,handleClose:I,children:[Object(x.jsx)("input",{value:A,onChange:function(e){var t=e.target.value;E(t),t.length<2?_({isValid:!1,inputError:"Use at least 2 characters"}):t.length>30?_({isValid:!1,inputError:"Use no more than 30 characters"}):U(t)?_({isValid:!0,inputError:""}):_({isValid:!1,inputError:"'<' and '>' are invalid characters"})},className:"popup__input popup__input_type_title",id:"title-input",type:"text",placeholder:"Title",name:"title",required:!0}),Object(x.jsx)("span",{className:"popup__error  title-input-error",children:g.inputError}),Object(x.jsx)("input",{value:L,onChange:function(e){var t=e.target.value;V(t);var n=P(t);n.valid?(N({isValid:!0,inputError:""}),V(n.match[0])):N({isValid:!1,inputError:"Please fill in a valid URL"})},className:"popup__input popup__input_type_url",id:"url-input",type:"url",placeholder:"Image URL",name:"url",required:!0}),Object(x.jsx)("span",{className:"popup__error url-input-error",children:S.inputError})]})}function M(e){var t=e.isOpen,n=e.onClose,r=e.onDeleteCard,i=Object(a.useRef)(),c=Object(a.useState)(!1),o=Object(b.a)(c,2),s=o[0],u=o[1],l=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,r(t);case 3:setTimeout((function(){return u(!1)}),500);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(z,{isOpen:t,onSubmit:l,name:"delete",formName:"delete",formTitle:"Are you sure?",submitTitle:"Yes",submitLoadingTitle:"Deleting",formRef:i,formValid:!0,isLoading:s,handleClose:n})}var Y=function(e){var t=e.children;return e.loggedIn?t:Object(x.jsx)(j.a,{to:"/login"})};function J(e){var t=e.isLoading,n=e.formValid,a=e.formName,r=e.formTitle,i=e.submitTitle,c=e.submitLoadingTitle,o=e.handleSubmit,s=e.children;return Object(x.jsxs)("form",{className:"form",name:a,onSubmit:o,noValidate:!0,children:[Object(x.jsx)("h1",{className:"form__title",children:r}),Object(x.jsx)("div",{className:"form__input-container",children:s}),Object(x.jsx)("button",{className:n?"form__save-button":"form__save-button form__save-button_disabled",type:"submit",children:t?"".concat(c,"..."):i})]})}var q=function(e,t,n){var a=e.target.value;t(a);var r=function(e){var t=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[x01-x08x0bx0cx0e-x1fx21x23-x5bx5d-x7f]|\\[x01-x09x0bx0cx0e-x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[x01-x08x0bx0cx0e-x1fx21-x5ax53-x7f]|\\[x01-x09x0bx0cx0e-x7f])+)\])/;return{valid:t.test(e),match:e.match(t)}}(a);r.valid?(n({isValid:!0,inputError:""}),t(r.match[0])):n({isValid:!1,inputError:"Please fill in a valid Email."})},Z=function(e,t,n,a){var r=e.target.value;if(t(r),r.length<6)n({isValid:!1,inputError:"Password must be at least 6 characters."});else{if(!(r.length>20))return U(r)?"login"===a||/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$/.test(r)?void n({isValid:!0,inputError:""}):void n({isValid:!1,inputError:"Please include at least 1 uppercase character, 1 lowercase character, and 1 number."}):void n({isValid:!1,inputError:"'<' and '>' are invalid characters."});n({isValid:!1,inputError:"Password can't be longer than 20 characters."})}};function K(e){var t=e.setHeaderText,n=e.setHeaderButton,r=e.setHeaderAction,i=e.setLoggedIn,c=e.isLoading,o=e.setIsLoading,s=e.setInfoTooltipMessage,u=e.setInfoTooltipOk,l=e.setInfoToolTipOpen,p=Object(j.g)(),d=Object(a.useState)(!1),f=Object(b.a)(d,2),m=f[0],h=f[1],O=Object(a.useState)(!1),g=Object(b.a)(O,2),_=g[0],v=g[1],k=Object(a.useState)(""),S=Object(b.a)(k,2),N=S[0],y=S[1],A=Object(a.useState)(""),E=Object(b.a)(A,2),T=E[0],w=E[1],L=Object(a.useState)({isValid:!1,inputError:""}),V=Object(b.a)(L,2),I=V[0],U=V[1],P=Object(a.useState)({isValid:!1,inputError:""}),z=Object(b.a)(P,2),B=z[0],H=z[1],D=function(){p("/register")};return Object(a.useEffect)((function(){I.isValid&&B.isValid?v(!0):v(!1)}),[I,B]),Object(a.useEffect)((function(){return t(""),n("Sign up"),r({action:D}),function(){return r({})}}),[]),Object(x.jsxs)("main",{className:"container",children:[Object(x.jsx)("div",{className:c?"spinner":"spinner spinner_hidden",children:Object(x.jsx)("i",{})}),Object(x.jsx)("div",{className:c?"content content_hidden":"content",children:Object(x.jsxs)("section",{className:"login",children:[Object(x.jsxs)(J,{isLoading:m,formValid:_,formName:"login",formTitle:"Log in",submitTitle:"Log in",submitLoadingTitle:"Loging in",handleSubmit:function(e){e.preventDefault(),_&&(h(!0),v(!1),C(N,T).then((function(e){if(!e.token)throw new Error(e.message||e.err);localStorage.setItem("token",e.token),i(!0),o(!0),p("/")})).catch((function(e){u(!1),s(e.message),l(!0)})).finally((function(){return h(!1)})))},children:[Object(x.jsx)("input",{className:"form__input",type:"email",placeholder:"Email",value:N,onChange:function(e){return q(e,y,U)}}),Object(x.jsx)("span",{className:"form__error",children:I.inputError}),Object(x.jsx)("input",{className:"form__input",type:"password",placeholder:"Password",value:T,onChange:function(e){return Z(e,w,H,"login")}}),Object(x.jsx)("span",{className:"form__error",children:B.inputError}),Object(x.jsx)("p",{className:"form__error"})]}),Object(x.jsx)("button",{className:"login__register-text-button",type:"button",onClick:D,children:"Not a member yet? Sign up here!"})]})})]})}function F(e){var t=e.setHeaderText,n=e.setHeaderButton,r=e.setHeaderAction,i=e.isLoading,c=e.setInfoTooltipMessage,o=e.setInfoTooltipOk,s=e.setInfoToolTipOpen,u=Object(j.g)(),l=Object(a.useState)(!1),p=Object(b.a)(l,2),d=p[0],f=p[1],m=Object(a.useState)(!1),h=Object(b.a)(m,2),O=h[0],g=h[1],_=Object(a.useState)(""),v=Object(b.a)(_,2),k=v[0],S=v[1],C=Object(a.useState)(""),y=Object(b.a)(C,2),A=y[0],E=y[1],T=Object(a.useState)({isValid:!1,inputError:""}),w=Object(b.a)(T,2),L=w[0],V=w[1],I=Object(a.useState)({isValid:!1,inputError:""}),U=Object(b.a)(I,2),P=U[0],z=U[1],B=function(){u("/login")};return Object(a.useEffect)((function(){L.isValid&&P.isValid?g(!0):g(!1)}),[L,P]),Object(a.useEffect)((function(){return t(""),n("Log in"),r({action:B}),function(){return r({})}}),[]),Object(x.jsxs)("main",{className:"container",children:[Object(x.jsx)("div",{className:i?"spinner":"spinner spinner_hidden",children:Object(x.jsx)("i",{})}),Object(x.jsx)("div",{className:i?"content content_hidden":"content",children:Object(x.jsxs)("section",{className:"register",children:[Object(x.jsxs)(J,{isLoading:d,formValid:O,formName:"register",formTitle:"Sign Up",submitTitle:"Sign Up",submitLoadingTitle:"Signing up",handleSubmit:function(e){e.preventDefault(),O&&(g(!1),f(!0),N(k,A).then((function(){o(!0),c("Success! You have now been registered."),s(!0),u("/login")})).catch((function(e){o(!1),c(e.message),s(!0)})).finally((function(){f(!1)})))},children:[Object(x.jsx)("input",{className:"form__input",type:"email",placeholder:"Email",value:k,onChange:function(e){return q(e,S,V)}}),Object(x.jsx)("span",{className:"form__error",children:L.inputError}),Object(x.jsx)("input",{className:"form__input",type:"password",placeholder:"Password",value:A,onChange:function(e){return Z(e,E,z)}}),Object(x.jsx)("span",{className:"form__error",children:P.inputError}),Object(x.jsx)("span",{className:"form__error"})]}),Object(x.jsx)("button",{className:"login__register-text-button",type:"button",onClick:B,children:"Already a member? Sign in here!"})]})})]})}var W=n.p+"static/media/fail-register.df8eddf6.svg",G=n.p+"static/media/success-register.1b6082f8.svg";function X(e){var t=e.isOk,n=e.isOpen,a=e.onClose,r=e.message;return Object(x.jsx)("div",{onClick:function(e){return T(e,a)},role:"button",tabIndex:0,className:n?"popup popup_type_tooltip popup_opened":"popup popup_type_tooltip",children:Object(x.jsxs)("div",{className:"popup__container",children:[Object(x.jsxs)("div",{className:"popup__message-container",children:[t?Object(x.jsx)("img",{className:"popup__icon",src:G,alt:"Success register"}):Object(x.jsx)("img",{className:"popup__icon",src:W,alt:"Fail register"}),Object(x.jsx)("p",{className:"popup__message",children:r||"Oops, Something went wrong! Please try again."})]}),Object(x.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:a})]})})}var $=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),c=Object(b.a)(i,2),o=c[0],l=c[1],f=Object(a.useState)(""),m=Object(b.a)(f,2),h=m[0],O=m[1],v=Object(a.useState)({}),k=Object(b.a)(v,2),S=k[0],N=k[1],C=Object(a.useState)({}),T=Object(b.a)(C,2),L=T[0],V=T[1],U=Object(a.useState)({}),P=Object(b.a)(U,2),z=P[0],H=P[1],D=Object(a.useState)({name:"",link:""}),J=Object(b.a)(D,2),q=J[0],Z=J[1],W=Object(a.useState)(""),G=Object(b.a)(W,2),$=G[0],ee=G[1],te=Object(a.useState)(!1),ne=Object(b.a)(te,2),ae=ne[0],re=ne[1],ie=Object(a.useState)(!1),ce=Object(b.a)(ie,2),oe=ce[0],se=ce[1],ue=Object(a.useState)(!1),le=Object(b.a)(ue,2),pe=le[0],de=le[1],be=Object(a.useState)(!1),je=Object(b.a)(be,2),fe=je[0],me=je[1],he=Object(a.useState)(!1),Oe=Object(b.a)(he,2),xe=Oe[0],ge=Oe[1],_e=Object(a.useState)(!1),ve=Object(b.a)(_e,2),ke=ve[0],Se=ve[1],Ne=Object(a.useState)(!1),Ce=Object(b.a)(Ne,2),ye=Ce[0],Ae=Ce[1],Ee=Object(a.useState)(""),Te=Object(b.a)(Ee,2),we=Te[0],Le=Te[1],Ve=Object(a.useState)(!1),Ie=Object(b.a)(Ve,2),Ue=Ie[0],Pe=Ie[1],ze=Object(a.useState)(!0),Be=Object(b.a)(ze,2),He=Be[0],De=Be[1],Re=Object(a.useState)([]),Qe=Object(b.a)(Re,2),Me=Qe[0],Ye=Qe[1],Je=Object(a.useCallback)((function(){me(!1),re(!1),se(!1),ge(!1),de(!1),Se(!1)}),[]);Object(a.useEffect)((function(){var e=function(e){"Escape"===e.key&&Je()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]);var qe=function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.setUserinfo({name:t,about:n}).then((function(e){var t=e.user;H(t),Je()})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.setUserPicture(t).then((function(){H(Object(u.a)(Object(u.a)({},z),{},{link:t})),Je()})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.addCard({name:t,link:n}).then((function(e){var t=e.card;Ye([t].concat(Object(s.a)(Me))),Je()})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(e,t){Ye((function(n){return n.map((function(n){return n._id===e?t:n}))}))},We=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,I.deleteCard($).then((function(){Ye((function(e){return e.filter((function(e){return e._id!==$}))})),Je()})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Ue&&z._id||(De(!0),y().then(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getIntialCard().then((function(e){H(t),Ye(e),Pe(!0)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)})).finally((function(){return De(!1)})))}),[Ue]),Object(x.jsx)("div",{className:"page",children:Object(x.jsxs)(_.Provider,{value:z,children:[Object(x.jsx)(g,{headerText:o,headerButton:h,headerAction:S,headerStyle:L}),Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{path:"/login",element:Ue?Object(x.jsx)(j.a,{to:"/"}):Object(x.jsx)(K,{setHeaderText:l,setHeaderButton:O,setHeaderAction:N,setLoggedIn:Pe,isLoading:He,setIsLoading:De,setInfoTooltipMessage:Le,setInfoTooltipOk:Ae,setInfoToolTipOpen:Se})}),Object(x.jsx)(j.b,{path:"/register",element:Ue?Object(x.jsx)(j.a,{to:"/"}):Object(x.jsx)(F,{setHeaderText:l,setHeaderButton:O,setHeaderAction:N,isLoading:He,setIsLoading:De,setInfoTooltipMessage:Le,setInfoTooltipOk:Ae,setInfoToolTipOpen:Se})}),Object(x.jsx)(j.b,{path:"/",element:Object(x.jsx)(Y,{loggedIn:Ue,children:Object(x.jsx)(A,{setHeaderText:l,setHeaderButton:O,setHeaderAction:N,setHeaderStyle:V,setLoggedIn:Pe,isLoading:He,cards:Me,setCards:Ye,likeActive:n,onEditProfileClick:function(){re(!0)},onAddPlaceClick:function(){se(!0)},onEditAvatarClick:function(){me(!0)},onDeleteCardClick:function(e){ee(e),de(!0)},onCardClick:function(e,t){Z({name:e,link:t}),ge(!0)},onCardLike:function(e,t){r(!0),t.some((function(e){return e===z._id}))?I.removeLike(e).then((function(t){return Fe(e,t.card)})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)})):I.addLike(e).then((function(t){return Fe(e,t.card)})).catch((function(e){return console.log(e)})).finally((function(){return r(!1)}))},setCurrentUser:H})})}),Object(x.jsx)(j.b,{path:"*",element:Ue?Object(x.jsx)(j.a,{to:"/"}):Object(x.jsx)(j.a,{to:"/login"})})]}),Object(x.jsx)(E,{}),Object(x.jsx)(B,{isOpen:ae,onClose:Je,onUpdateUser:qe}),Object(x.jsx)(R,{isOpen:fe,onClose:Je,onUpdateAvatar:Ze}),Object(x.jsx)(Q,{isOpen:oe,onClose:Je,onAddPlace:Ke}),Object(x.jsx)(M,{isOpen:pe,onClose:Je,onDeleteCard:We}),Object(x.jsx)(w,{isOpen:xe,selectedCard:q,onClose:Je}),Object(x.jsx)(X,{isOpen:ke,onClose:Je,isOk:ye,message:we})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(o.a,{children:Object(x.jsx)($,{})})}),document.getElementById("root")),ee()}},[[25,1,2]]]);
//# sourceMappingURL=main.10cb4933.chunk.js.map